{"version":3,"sources":["page/Search/style.module.css","page/Search/Search.js"],"names":["module","exports","connect","state","props","history","useHistory","useState","undefined","keyword","setKeyword","callback","useCallback","debounce","filterdList","useMemo","notes","list","filter","item","title","toLowerCase","indexOf","className","style","container","topbar","topbarInputContianer","placeholder","onChange","e","currentTarget","value","onClick","goBack","topbarCancelIcon","searchResultCounts","length","searchResult","map","key","_id","searchResultItem","push","searchResultTitle","summary","searchResultSummary"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,OAAS,sBAAsB,qBAAuB,oCAAoC,iBAAmB,gCAAgC,mBAAqB,kCAAkC,aAAe,4BAA4B,iBAAmB,gCAAgC,kBAAoB,iCAAiC,oBAAsB,qC,iVCwDhXC,uBAFE,SAACC,GAAD,O,yVAAA,IAAiBA,KAEnBD,EAjDA,SAACE,GACd,IAAMC,EAAUC,cADQ,EAEWC,wBAASC,GAFpB,0BAEjBC,OAFiB,MAEP,GAFO,EAEHC,EAFG,KAGlBC,EAAWC,sBAAYC,YAASH,EAAY,KAAM,IAElDI,EAAcC,mBAAQ,WAC1B,IAAKN,EAAS,MAAO,GADW,MAGVL,EAAMY,MAApBC,KACR,YAJgC,MAGjB,GAHiB,GAIpBC,QAAO,SAAAC,GAAI,OAAIA,EAAKC,MAAMC,cAAcC,QAAQb,EAAQY,gBAAkB,OACrF,CAACZ,EAASL,EAAMY,QAEnB,OACE,yBAAKO,UAAWC,IAAMC,WACpB,yBAAKF,UAAWC,IAAME,QACpB,yBAAKH,UAAWC,IAAMG,sBACpB,uBAAGJ,UAAW,yBACd,2BAAOK,YAAY,uCAASC,SAAU,SAACC,GAAD,OAAOnB,EAASmB,EAAEC,cAAcC,WAExE,4BACEC,QAAS,kBAAM5B,EAAQ6B,UACvBX,UAAWC,IAAMW,kBAFnB,iBAMA1B,EACE,yBAAKc,UAAWC,IAAMY,oBAAtB,SAA4CtB,EAAYuB,OAAxD,kCACE,KAEN,wBAAId,UAAWC,IAAMc,cAEjBxB,EAAYyB,KAAI,SAAApB,GAAI,OAClB,wBACEqB,IAAKrB,EAAKsB,IACVlB,UAAWC,IAAMkB,iBACjBT,QAAS,kBAAM5B,EAAQsC,KAAR,mBAAyBxB,EAAKsB,QAE7C,uBAAGlB,UAAWC,IAAMoB,mBAAoBzB,EAAKC,OAC3CD,EAAK0B,QAAU,uBAAGtB,UAAWC,IAAMsB,qBAAsB3B,EAAK0B,SAAe","file":"static/js/6.8672ab51.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"topbar\":\"style_topbar__RUTcM\",\"topbarInputContianer\":\"style_topbarInputContianer__3hxO4\",\"topbarCancelIcon\":\"style_topbarCancelIcon__3PbqO\",\"searchResultCounts\":\"style_searchResultCounts__3Z1IP\",\"searchResult\":\"style_searchResult__2Mbm0\",\"searchResultItem\":\"style_searchResultItem__3x2Ot\",\"searchResultTitle\":\"style_searchResultTitle__2Y50s\",\"searchResultSummary\":\"style_searchResultSummary__1B5yT\"};","import React, { useState, useCallback, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { debounce } from '../../utils/util';\n\nimport style from './style.module.css';\n\nconst Search = (props) => {\n  const history = useHistory();\n  const [keyword = '', setKeyword] = useState(undefined);\n  const callback = useCallback(debounce(setKeyword, 500), []);\n\n  const filterdList = useMemo(() => {\n    if (!keyword) return [];\n\n    const { list = [] } = props.notes;\n    return list.filter(item => item.title.toLowerCase().indexOf(keyword.toLowerCase()) > -1);\n  }, [keyword, props.notes]);\n\n  return (\n    <div className={style.container}>\n      <div className={style.topbar}>\n        <div className={style.topbarInputContianer}>\n          <i className={'iconfont icon-sousuo'} />\n          <input placeholder=\"搜索笔记标题\" onChange={(e) => callback(e.currentTarget.value)} />\n        </div>\n        <button\n          onClick={() => history.goBack()}\n          className={style.topbarCancelIcon}\n        >取消</button>\n      </div>\n      {\n        keyword ? (\n          <div className={style.searchResultCounts}>共{filterdList.length}条搜索结果</div>\n        ) : null\n      }\n      <ul className={style.searchResult}>\n        {\n          filterdList.map(item => (\n            <li\n              key={item._id}\n              className={style.searchResultItem}\n              onClick={() => history.push(`/article/${item._id}`)}\n            >\n              <p className={style.searchResultTitle}>{item.title}</p>\n              { item.summary ? <p className={style.searchResultSummary}>{item.summary}</p> : null }\n            </li>\n          ))\n        }\n      </ul>\n    </div>\n  );\n};\n\nconst mapState = (state) => ({ ...state });\n\nexport default connect(mapState)(Search);\n"],"sourceRoot":""}