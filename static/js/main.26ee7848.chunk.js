(this.webpackJsonpreditor=this.webpackJsonpreditor||[]).push([[0],{15:function(t,e,n){t.exports={sortPannelContainer:"style_sortPannelContainer__1Jp_Z",sortPannelItem:"style_sortPannelItem__3Sq_K",sortPannelItemSelected:"style_sortPannelItemSelected__1ILPm",sortPannelOpen:"style_sortPannelOpen__1lXAY",sortPannelClose:"style_sortPannelClose__1Fews"}},16:function(t,e,n){t.exports={bodyExtraStyle:"style_bodyExtraStyle__1iqA6",editorContainer:"style_editorContainer__3uFRH",editorBar:"style_editorBar__1sNuQ",editorBarButton:"style_editorBarButton__3A2vo",editorBarButtonSelcted:"style_editorBarButtonSelcted__3cz3a",titleInputContainer:"style_titleInputContainer__3AkwD",titleInput:"style_titleInput__1z1EM",contentInput:"style_contentInput__3EVLe",pannelContainer:"style_pannelContainer__14E6a",pannelFontSize:"style_pannelFontSize__rV5yo",pannelFontSizeItem:"style_pannelFontSizeItem__j4DJc",pannelFontSizeItemSelected:"style_pannelFontSizeItemSelected__2Uoqe",iconDone:"style_iconDone__rZTDE"}},2:function(t,e,n){t.exports={topbar:"style_topbar__yMW3F",iconBack:"style_iconBack__2nDaI",avatar:"style_avatar__fHu3i",userName:"style_userName__1vvmd",userGreet:"style_userGreet__37u6P",listContainer:"style_listContainer__3hpa-",listContainerTitle:"style_listContainerTitle__2PDVz",listContainerSpandIcon:"style_listContainerSpandIcon__2dawL",listContainerSpandIconActive:"style_listContainerSpandIconActive__2MM07",listContainerName:"style_listContainerName__3irvH",listItem:"style_listItem__3BErP",listItemInner:"style_listItemInner__15r3R",listItemCover:"style_listItemCover__Xa8Gm",listItemMain:"style_listItemMain__2Imsk",listItemTime:"style_listItemTime__2Yicc",listItemTitle:"style_listItemTitle__3-y1P",listItemSummay:"style_listItemSummay__3f6mL",listItemPlaceholder:"style_listItemPlaceholder__1q7yb",listTipsEmpty:"style_listTipsEmpty__1UPzA",newBtn:"style_newBtn__2XlSv",newBtnIcon:"style_newBtnIcon__3Curo"}},31:function(t,e,n){t.exports=n(48)},36:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"notes",(function(){return L})),n.d(a,"user",(function(){return z}));var r=n(0),i=n.n(r),c=n(19),s=n.n(c),o=(n(36),n(13)),l=n(12),u=n(10),_=n(14),p=n(11),m=n(2),d=n.n(m),f=n(15),y=n.n(f),b=function(t){var e=t.selectedSortTypeIndex,n=void 0===e?0:e,a=t.sortTypes,r=void 0===a?[]:a,c=t.onSelect,s=void 0===c?function(){}:c,o=t.isOpen,l=void 0!==o&&o;return i.a.createElement("ul",{className:"".concat(y.a.sortPannelContainer," ").concat(l?y.a.sortPannelOpen:y.a.sortPannelClose)},r.map((function(t,e){return i.a.createElement("li",{key:t.text,className:"".concat(y.a.sortPannelItem," ").concat(e===n?y.a.sortPannelItemSelected:""),onClick:function(){return s(e)}},t.text)})))},O="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),v=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.lengt,n=[],a=0;a<t;a++)n[a]=O[0|Math.random()*e];return n.join("")},h=["https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970067979/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970068193/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970068312/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970068266/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970069346/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970083300/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970083358/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970083279/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970083371/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970083563/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970095496/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970095574/0","https://puui.qpic.cn/fans_admin/0/3_1440788960_1570970095609/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970095623/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970095728/0","https://puui.qpic.cn/fans_admin/0/3_1440788960_1570970110018/0","https://puui.qpic.cn/fans_admin/0/3_1440788960_1570970110000/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970110039/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970110270/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970110396/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970121675/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970121803/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970122711/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970121779/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970121998/0","https://puui.qpic.cn/fans_admin/0/3_1271937727_1570970132903/0","https://puui.qpic.cn/fans_admin/0/3_1409075683_1570970133088/0"],E=function(){return h[Math.floor(Math.random()*h.length)]},I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],j=function(t){var e=t.getMonth(),n=I[e].toUpperCase();return"".concat(n," ").concat(t.getDate(),", ").concat(t.getFullYear())};function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var S=[{text:"\u6700\u8fd1\u66f4\u65b0",sortFn:function(t,e){return e.updated_at-t.updated_at}},{text:"\u6700\u8fd1\u521b\u5efa",sortFn:function(t,e){return e.created_at-t.created_at}},{text:"\u6587\u4ef6\u540d(A-Z)",sortFn:function(t,e){return e.title>t.title?-1:1}},{text:"\u6587\u4ef6\u540d(Z-A)",sortFn:function(t,e){return e.title>t.title?1:-1}},{text:"\u6700\u65e9\u66f4\u65b0",sortFn:function(t,e){return t.updated_at-e.updated_at}},{text:"\u6700\u65e9\u521b\u5efa",sortFn:function(t,e){return t.created_at-e.created_at}}],P=Object(p.b)((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(n,!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)}))((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.user,n=void 0===e?{}:e,a=t.notes,c=void 0===a?{}:a,s=c.list,u=Object(r.useState)(0),p=Object(_.a)(u,2),m=p[0],f=p[1],y=Object(r.useState)(!1),O=Object(_.a)(y,2),v=O[0],h=O[1],E=Object(l.f)(),I=S[m]||S[0],g=I.sortFn;return i.a.createElement("div",null,i.a.createElement("div",{className:d.a.topbar},i.a.createElement("img",{src:n.avatar,className:d.a.avatar,alt:n.name})),i.a.createElement("p",{className:d.a.userName},"Hello, ",n.name),i.a.createElement("p",{className:d.a.userGreet},"welcome to reditor"),i.a.createElement("div",{className:d.a.listContainer},i.a.createElement("div",{className:d.a.listContainerTitle},i.a.createElement("p",{className:d.a.listContainerName},"Notes"),i.a.createElement("i",{className:"iconfont icon-zhankai ".concat(d.a.listContainerSpandIcon," ").concat(v?d.a.listContainerSpandIconActive:""),onClick:function(){return h(!v)}})),i.a.createElement(b,{sortTypes:S,selectedSortTypeIndex:m,onSelect:function(t){return f(t)},isOpen:v}),s&&s.length?s.sort(g).map((function(t){return i.a.createElement("div",{className:d.a.listItem,key:t._id},i.a.createElement(o.b,{className:d.a.listItemInner,to:"/article/".concat(t._id)},i.a.createElement("img",{className:d.a.listItemCover,src:t.cover,alt:t.title}),i.a.createElement("div",{className:d.a.listItemMain},i.a.createElement("p",{className:d.a.listItemTime},j(new Date(t.created_at))),i.a.createElement("p",{className:d.a.listItemTitle},t.title),i.a.createElement("div",{className:d.a.listItemPlaceholder}),i.a.createElement("p",{className:d.a.listItemSummay},t.summary))))})):null,s&&s.length?null:i.a.createElement("p",{className:d.a.listTipsEmpty},"\u6682\u65f6\u6ca1\u6709\u8bb0\u5f55\u54e6~")),i.a.createElement("div",{className:d.a.newBtn,onClick:function(){return E.push("/edit")}},i.a.createElement("i",{className:"iconfont icon-plus-creat ".concat(d.a.newBtnIcon)})))})),N=n(7),C=n.n(N);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var D=Object(p.b)((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(n,!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)}))((function(t){var e=Object(l.f)(),n=Object(l.g)().id,a=t.notes||{},r=a.list[a.searchMap[n]];return i.a.createElement("div",null,i.a.createElement("header",{className:C.a.topbar,style:{backgroundImage:"url(".concat(r.cover,")")}},i.a.createElement("div",{className:C.a.topbarMask}),i.a.createElement("i",{onClick:function(){return e.goBack()},className:"iconfont icon-jiantou-px ".concat(C.a.topbarBackIcon)}),i.a.createElement("span",{onClick:function(){return e.push("/edit/".concat(r._id))},className:C.a.topbarEditIcon},"EDIT")),r.last_edited_content?i.a.createElement("div",{className:C.a.draftTip},"\u8be5\u7b14\u8bb0\u6709\u6682\u672a\u53d1\u5e03\u7684\u8349\u7a3f\uff0c\u70b9\u51fb\u7f16\u8f91\u7ee7\u7eed\u521b\u4f5c~"):null,i.a.createElement("div",{className:C.a.articleContainer},i.a.createElement("h1",{className:C.a.title},r.title),i.a.createElement("p",{className:C.a.time},j(new Date(r.created_at))),i.a.createElement("div",{className:C.a.splitLine}),i.a.createElement("article",{className:C.a.article,dangerouslySetInnerHTML:{__html:r.content}})))})),q=n(29),T=n(21),k=function(t,e){localStorage.setItem(t,JSON.stringify(e))};function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(n,!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x=function(t){var e=localStorage.getItem(t);if(null!==e&&void 0!==e)try{e=JSON.parse(e)}catch(n){}return e}("LS_KEY_NOTES")||[{_id:v(32,16),created_at:Date.now(),updated_at:Date.now(),title:"\u6b22\u8fce\u4f7f\u7528 Reditor \u8bb0\u4e8b\u672c",content:"",summary:"",cover:E(),status:1,last_edited_content:""}],F=function(t){var e={};return t.forEach((function(t,n){e[t._id]=n})),e};k("LS_KEY_NOTES",x);var L={state:{list:x,searchMap:F(x)},reducers:{addNote:function(t,e){return B({},t,{list:[].concat(Object(T.a)(t.list),[e])})},editNote:function(t,e){var n=t.searchMap[e._id];return B({},t,{list:[].concat(Object(T.a)(t.list.slice(0,n)),[e],Object(T.a)(t.list.slice(n+1)))})},setSearchMap:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return B({},t,{searchMap:e})}},effects:function(t){return{submit:function(e){var n=e.title,a=void 0===n?"\u65e0\u6807\u9898":n,r=e.content,i=void 0===r?"":r,c=e.summary,s=void 0===c?"":c;e._id?t.notes.editNote(B({},e,{updated_at:Date.now(),title:a,content:i,summary:s,status:1,last_edited_content:""})):t.notes.addNote({_id:v(32,16),created_at:Date.now(),updated_at:Date.now(),title:a,content:i,summary:s,cover:E(),status:1,last_edited_content:""}),t.notes.refreshSearchMap(),t.notes.saveToLs()},refreshSearchMap:function(e,n){var a=F(n.notes.list);console.log(a),t.notes.setSearchMap(a)},saveToLs:function(t,e){k("LS_KEY_NOTES",e.notes.list)}}}},z={state:{name:"Green",avatar:"https://puui.qpic.cn/fans_admin/0/3_1574395846_1570799849120/0"},reducers:{},effects:function(t){return{}}},A=Object(q.init)({models:a}),J=A.dispatch,H=A,Y=n(30),G=n.n(Y),U=(n(47),n(16)),K=n.n(U);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(n,!0).forEach((function(e){Object(u.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X=Object(p.b)((function(t){return V({},t)}))((function(t){var e=Object(r.useState)(null),n=Object(_.a)(e,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(_.a)(s,2),u=o[0],p=o[1],m=Object(l.f)(),d=Object(l.g)(),f=null;if(d.id){var y=t.notes||{},b=y.list[y.searchMap[d.id]];f=b}Object(r.useEffect)((function(){if(!a){var t=new G.a("#editor",{modules:{toolbar:[[{header:[1,2,3,4,5,!1]}],[{color:[]},{background:[]}],["bold","italic","underline","strike","align"]]},theme:"snow"});c(t),f&&(u||p(f.title),t.root.innerHTML=f.content)}}),[a,f,u]);return i.a.createElement("div",{className:K.a.editorContainer},i.a.createElement("div",{className:K.a.titleInputContainer},i.a.createElement("input",{className:K.a.titleInput,onChange:function(t){return p(t.currentTarget.value)},value:u,placeholder:"\u70b9\u6b64\u8bbe\u7f6e\u6807\u9898"})),i.a.createElement("div",{className:K.a.contentInput,id:"editor"}),i.a.createElement("div",{className:K.a.iconDone,onClick:function(){return function(){var t=document.querySelector(".ql-editor").innerHTML,e=a.getText()||"";J.notes.submit(V({},f||{},{title:u||"\u65e0\u6807\u9898",content:t||"",summary:e.slice(0,30)})),m.push("/")}()}},i.a.createElement("i",{className:"iconfont icon-jurassic_complete"})))}));console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/reditor"})),s.a.render(i.a.createElement(p.a,{store:H},i.a.createElement((function(){return i.a.createElement(o.a,{basename:"/reditor"},i.a.createElement(l.c,null,i.a.createElement(l.a,{path:"/article/:id"},i.a.createElement(D,null)),i.a.createElement(l.a,{path:"/edit/:id?"},i.a.createElement(X,null)),i.a.createElement(l.a,{path:"/"},i.a.createElement(P,null))))}),null)),document.getElementById("root"))},7:function(t,e,n){t.exports={topbar:"style_topbar__2ls54",topbarMask:"style_topbarMask__2e_vC",topbarBackIcon:"style_topbarBackIcon__gzBlo",topbarEditIcon:"style_topbarEditIcon__3Wo3s",draftTip:"style_draftTip__3eO0F",articleContainer:"style_articleContainer__2CpH7",title:"style_title__2sp66",time:"style_time__1b4w2",splitLine:"style_splitLine__2v8tP",article:"style_article__2DT5X"}}},[[31,1,2]]]);
//# sourceMappingURL=main.26ee7848.chunk.js.map